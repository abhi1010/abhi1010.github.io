<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Coders Digest &middot; Abhishek Pandey</title>

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/poole.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/hyde-a.css">
  <link rel="stylesheet" href="http://abhi1010.github.io/css/custom-additions.css">
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://abhi1010.github.io/touch-icon-144-precomposed.png">
  <link href="http://abhi1010.github.io/favicon.png" rel="icon">

  
  
  
  <link href="http://abhi1010.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Coders Digest &middot; Abhishek Pandey" />

  <meta name="description" content="Your default page description">
  <meta name="keywords" content="your,default,page,keywords">
  
</head>
<body class="theme-base-aa">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1><a href="http://abhi1010.github.io/">Abhishek Pandey</a></h1>
      <p class="lead">&hellip; lost in reverie</p>
    </div>

    <ul class="sidebar-nav">
      
      <li class="sidebar-nav-item"><a href="http://abhi1010.github.io/post/">Posts</a></li>
      
      <li class="sidebar-nav-item"><a href="http://abhi1010.github.io/tags/">Tags</a></li>
      
      <li class="sidebar-nav-item"><a href="http://abhi1010.github.io/categories/">Categories</a></li>
      
      <li class="sidebar-nav-item"><a href="http://abhi1010.github.io/about/">About</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      
      
      
      
      
      </li>
    </ul>

    

  </div>
</div>


<div class="content container">
  <div class="posts">
    
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2015/09/using-external-tools-with-git-diff/">Using External Tools with Git Diff</a>
      </h1>
      <span class="post-date">Sep 10, 2015  &middot; <a href="http://abhi1010.github.io/2015/09/using-external-tools-with-git-diff/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/git">git</a>
    
      </span>
      
      <p>If you want to view what has changed since one commit to another, it is quite easy to view the diff.</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">git diff 5fad06c..0a504fa
</pre></div>


<p>You will get something like this:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000080; font-weight: bold">diff --git a/modules/file_1.erb b/modules/file_1.erb</span>
<span style="color: #000080; font-weight: bold">index 0538da0..6621d93 100644</span>
<span style="color: #a40000">--- a/modules/file_1.erb</span>
<span style="color: #00A000">+++ b/modules/file_1.erb</span>
<span style="color: #800080; font-weight: bold">@@ -5,8 +5,8 @@</span>
 
   // Algo settings
   &quot;Carbo&quot;: {
<span style="color: #a40000">-    &quot;active-instrument&quot;: &quot;SGX/NK15&quot;,</span>
<span style="color: #a40000">-    &quot;hedge-instrument&quot;: &quot;SGX/NK16&quot;,</span>
<span style="color: #00A000">+    &quot;active-instrument&quot;: &quot;SGX/NK17&quot;,</span>
<span style="color: #00A000">+    &quot;hedge-instrument&quot;: &quot;SGX/NK18&quot;,</span>
     &quot;owner-app-id&quot;: &quot;abhi1010&quot;,
</pre></div>


<p>What if you wanted a use an external tool like <code>meld</code> to view the diff, in a nice beautiful side by side view? You&rsquo;d have to modify your settings to tell that to <code>git</code>.
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">git config --global diff.tool meld
</pre></div>
</p>

<p>Finally, then to view the diff:
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">git difftool 5fad06c..0a504fa
</pre></div>
</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2015/09/updating-django-source-with-docker-deployments/">Updating Django Source with Docker Deployments</a>
      </h1>
      <span class="post-date">Sep 4, 2015  &middot; <a href="http://abhi1010.github.io/2015/09/updating-django-source-with-docker-deployments/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a><a class="a_cat" href="http://abhi1010.github.io/categories/continuous-delivery">continuous delivery</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/docker">docker</a><a class="a_tag" href="http://abhi1010.github.io/tags/django">django</a><a class="a_tag" href="http://abhi1010.github.io/tags/uwsgi">uwsgi</a><a class="a_tag" href="http://abhi1010.github.io/tags/git">git</a><a class="a_tag" href="http://abhi1010.github.io/tags/supervisord">supervisord</a>
    
      </span>
      
      

<p>While deploying docker multiple times, you may not want to copy over your <code>Django</code> source code every time you do a deployment.</p>

<h1 id="setting-up-supervisord:8ef139736ad377184214844940ced19b">Setting up <code>supervisord</code></h1>

<p>Luckily there is an easy way to manage this. Since you are working with <code>Django</code>, there is a good chance that you are also managing the processes (like <code>uwsgi</code>) with <code>supervisord</code>.</p>

<p>Here are some of the steps that you can take with <code>supervisord</code></p>

<ul>
<li>Set up a new process in <code>supervisord</code></li>
<li>Do not allow it to <em><code>autorestart</code></em> since it will be a one-shot process</li>
<li>Call another script in any format to update the source code

<ul>
<li>As an example, I use <code>bash</code> to update my source code through <code>git</code></li>
</ul></li>
</ul>

<p>Here&rsquo;s a sample code:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">    <span style="color: #ce5c00; font-weight: bold">[</span>program:source-updater<span style="color: #ce5c00; font-weight: bold">]</span>
    <span style="color: #000000">redirect_stderr</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87">true</span>
<span style="color: #204a87">    </span><span style="color: #000000">stdout_logfile</span> <span style="color: #ce5c00; font-weight: bold">=</span> /shared/source_code_updater.log
    <span style="color: #000000">directory</span> <span style="color: #ce5c00; font-weight: bold">=</span> /ws/
    <span style="color: #204a87">command</span> <span style="color: #ce5c00; font-weight: bold">=</span> /ws/source_code_updater.sh
    <span style="color: #000000">autorestart</span><span style="color: #ce5c00; font-weight: bold">=</span>False
</pre></div>


<h1 id="updating-the-source-code:8ef139736ad377184214844940ced19b">Updating the source code</h1>

<p>Few things are important to note in a <code>docker</code> deployment:</p>

<ul>
<li>Not every commit needs to be deployed</li>
<li>Filter your commits to only allow <strong><em>deployable</em></strong> code to be updated on <code>docker</code></li>
<li>Include regression, unit and system tests to be part of your build process</li>
<li>Once everything has been confirmed to be working, tag your code so that you know it is worthy of going to docker</li>
<li>Another way would be to manage this process through branches and merge only if everything passes</li>
<li><code>docker</code> deployments would build off this merged branch or tagged version</li>
<li>This way even if you have made 10 commits while fixing a bug and are still in the process of fixing it, you know it won&rsquo;t go to <code>docker</code> deployment</li>
</ul>

<p>With that idea, do a checkout and update the source code according to specific tag:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">    git checkout -f tags/your_tag_name
    git pull origin tags/your_tag_name
</pre></div>


<h1 id="telling-uwsgi-about-the-updated-source-code:8ef139736ad377184214844940ced19b">Telling <code>uwsgi</code> about the updated source code</h1>

<p>Once you have updated your source code, you need to re-load the project onto <code>uwsgi</code> so that <code>nginx</code> or <code>apache</code> can pick it up.
The simplest way to achieve it using the config parameter of <code>uwsgi</code>: <code>--touch-reload</code>. It will <em>reload uWSGI if the specified file is modified/touched</em></p>

<p>Just remember to setup <code>supervisord</code> in your <code>Dockerfile</code> with this config parameter.</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #ce5c00; font-weight: bold">[</span>program:app-uwsgi<span style="color: #ce5c00; font-weight: bold">]</span>
<span style="color: #000000">redirect_stderr</span> <span style="color: #ce5c00; font-weight: bold">=</span> <span style="color: #204a87">true</span>
<span style="color: #000000">stdout_logfile</span> <span style="color: #ce5c00; font-weight: bold">=</span> /var/shared/_uwsgi.log
<span style="color: #204a87">command</span> <span style="color: #ce5c00; font-weight: bold">=</span> /ws/ve_envs/rwv2/bin/uwsgi --touch-reload<span style="color: #ce5c00; font-weight: bold">=</span>/ws/wsgi.ini --ini /ws/wsgi.ini
</pre></div>


<p>You can choose any file. I choose <code>uwsgi.ini</code> because the contents never really need to change in it.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2015/09/multiple-virtual-environments-in-docker/">Multiple Virtual Environments in Docker</a>
      </h1>
      <span class="post-date">Sep 3, 2015  &middot; <a href="http://abhi1010.github.io/2015/09/multiple-virtual-environments-in-docker/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/continuous-delivery">continuous delivery</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/docker">docker</a><a class="a_tag" href="http://abhi1010.github.io/tags/python">python</a><a class="a_tag" href="http://abhi1010.github.io/tags/deployment">deployment</a><a class="a_tag" href="http://abhi1010.github.io/tags/supervisord">supervisord</a>
    
      </span>
      
      <p>It may seem like a daunting task to have multiple python projects running in their own virtual environments in docker as you want to manage the running of the tasks from a single source - let&rsquo;s say <code>supervisord</code>.
However, all that is required here is to know that python automatically picks up the location of the virtual environments if you provide full path to the virtual environment&rsquo;s python.</p>

<p>For example, in my docker environment, I have virtual environment install at the following location:</p>

<pre><code>/ws/ve_envs/rwv1/
</code></pre>

<p>To enable a project with this virtual environment, I can run the following:</p>

<pre><code>/ws/ve_envs/rwv1/bin/python3.4 PYTHON_PROJECT_FILE_TO_RUN.py
</code></pre>

<p>Similarly, other projects can be set up in the same way.</p>

<p>For example, for running <code>uwsgi</code> I provide the full path for python as follows:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #ce5c00; font-weight: bold">[</span>program:appName<span style="color: #ce5c00; font-weight: bold">]</span>
<span style="color: #000000">stdout_logfile</span> <span style="color: #ce5c00; font-weight: bold">=</span> /var/shared/_uwsgi.log
<span style="color: #204a87">command</span> <span style="color: #ce5c00; font-weight: bold">=</span> /ws/ve_envs/project/bin/uwsgi --touch-reload<span style="color: #ce5c00; font-weight: bold">=</span>/ws/wsgi.ini --ini /ws/wsgi.ini
</pre></div>


<p>You might want to read about <code>--touch-reload</code> in my <a href="http://abhi1010.github.io/2015/09/updating-django-source-with-docker-deployments/">other post.</a></p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2015/08/docker-container-cleanup-on-elastic-beanstalk/">Docker Container cleanup on Elastic Beanstalk</a>
      </h1>
      <span class="post-date">Aug 7, 2015  &middot; <a href="http://abhi1010.github.io/2015/08/docker-container-cleanup-on-elastic-beanstalk/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/linux">Linux</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/aws">aws</a><a class="a_tag" href="http://abhi1010.github.io/tags/beanstalk">beanstalk</a><a class="a_tag" href="http://abhi1010.github.io/tags/docker">docker</a>
    
      </span>
      
      <p>Sometimes you may notice that old containers are not cleaned up from Beanstalk environment. This may be due to your container still running as a ghost on the background. One way to find out about this is to quickly look into your
<code>/var/lib/docker/vfs/dir</code> directory whether it has too many folders.</p>

<p>Next, find out what container processes you have going on.
<code>[root@ip dir]# docker ps -a</code></p>

<p>You might see something like this:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000000; font-style: italic">    CONTAINER ID        IMAGE                              COMMAND             CREATED             STATUS              PORTS               NAMES</span>
<span style="color: #000000; font-style: italic">    1611e5ebe2c0        aws_beanstalk/staging-app:latest   &quot;supervisord -n&quot;    About an hour ago                                           boring_galileo</span>
<span style="color: #000000; font-style: italic">    e59d0dd8bba1        aws_beanstalk/staging-app:latest   &quot;supervisord -n&quot;    About an hour ago                                           desperate_yalow</span>
<span style="color: #000000; font-style: italic">    3844d0e18c47        aws_beanstalk/staging-app:latest   &quot;supervisord -n&quot;    2 hours ago         Up 8 minutes        80/tcp              pensive_jang</span>
</pre></div>


<p>Ideally, we want to &ldquo;forcibly remove&rdquo; all images (and hence the folders from <code>/var/lib/docker/vfs/dir</code> directory) that are not in use anymore.
Just run the following to test whether it works:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000000; font-style: italic">    docker rmi -f `docker images -aq`</span>
</pre></div>


<p>You might run into trouble where docker says that all those images already have a container that is running them. This means those container are orphaned but not killed as we thought them to be. Let&rsquo;s remove the shared volumes if any, for each one of them.</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000000; font-style: italic">    docker rm -fv `docker ps -aq` </span>
</pre></div>


<p>This will</p>

<ul>
<li>kill the container</li>
<li>unlink the volumes</li>
</ul>

<p>You should see a lot more space now on your beanstalk instance.
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000000; font-style: italic">    [root@ip dir]# df -h</span>
<span style="color: #000000; font-style: italic">    Filesystem      Size  Used Avail Use% Mounted on</span>
<span style="color: #000000; font-style: italic">    /dev/xvda1      7.8G  1.8G  5.9G  24% /</span>
<span style="color: #000000; font-style: italic">    devtmpfs        490M   96K  490M   1% /dev</span>
<span style="color: #000000; font-style: italic">    tmpfs           499M     0  499M   0% /dev/shm</span>
</pre></div>
</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/06/partition-linked-list-around-a-value-x/">Partition Linked List around a Value X</a>
      </h1>
      <span class="post-date">Jun 9, 2014  &middot; <a href="http://abhi1010.github.io/2014/06/partition-linked-list-around-a-value-x/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/c">c&#43;&#43;</a><a class="a_tag" href="http://abhi1010.github.io/tags/algo">algo</a><a class="a_tag" href="http://abhi1010.github.io/tags/linked-list">linked list</a>
    
      </span>
      
      

<p>How do you partition a list around a value x, such that all nodes less than x come before all nodes greater than or equal to x?</p>

<p>Well, there are some solutions possible. The solution, I came up with, is a bit convoluted but let me tell the idea behind it. You want to track the following:</p>

<ul>
<li><p>Two pointers to remember the beginning of the <em>lower</em> and <em>higher</em> series each</p></li>

<li><p>One pointer (<em>current</em>) to iterate through the Linked List</p></li>

<li><p>The list may itself start with higher or lower value compared to the <em>middleValue</em>. Thus we need to remember the beginning of the lower series (<em>lowerSeries</em>) as this is what we will send back</p></li>
</ul>

<p>Now that we have this out of the way, let&rsquo;s look at the code:</p>

<script type="text/javascript" src="http://gist.github.com/3ada1d15b5bda319a54c.js"></script>

<h1 id="code:8a20b19b0e16e5ac875728276c435d4c">Code</h1>

<p>As usual the code is available <a href="https://github.com/abhi1010/Algorithms/blob/master/Algo_codes/Node.cpp">here</a>:</p>

<p><a href="https://github.com/abhi1010/Algorithms">https://github.com/abhi1010/Algorithms</a></p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/06/find-the-kth-to-last-element-of-a-singly-linked-list/">Find the Kth to Last Element of a Singly Linked List</a>
      </h1>
      <span class="post-date">Jun 8, 2014  &middot; <a href="http://abhi1010.github.io/2014/06/find-the-kth-to-last-element-of-a-singly-linked-list/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/c">c&#43;&#43;</a><a class="a_tag" href="http://abhi1010.github.io/tags/algo">algo</a><a class="a_tag" href="http://abhi1010.github.io/tags/linked-list">linked list</a>
    
      </span>
      
      <p>It is possible to a recursive solutions but I will use a simple runner logic. Recursive solutions are usually less optimal.</p>

<p>Note here that, in our logic K=1 would return the last element in the linked list. Similarly, K=2 would return the second last element.</p>

<p>The suggested solution here is to use two pointers:</p>

<ul>
<li>One pointer will first travel K items into the list</li>
<li>Once that is done, both the pointers start travelling together, one item at a time</li>
<li>They keep travelling until the end of linked list is found</li>
<li>In that situation, the first pointer is at the end of the list, but the second pointer would have only reached till Kth element - this is what you want</li>
</ul>

<p>Let&rsquo;s have a look at the code:</p>

<script type="text/javascript" src="http://gist.github.com/43e289a9877fb9293680.js"></script>

<p>As usual the code is available <a href="https://github.com/abhi1010/Algorithms/blob/master/Algo_codes/Node.cpp">here</a>:</p>

<p><a href="https://github.com/abhi1010/Algorithms">https://github.com/abhi1010/Algorithms</a></p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/06/removing-duplicates-from-linked-list/">Removing Duplicates from Linked List</a>
      </h1>
      <span class="post-date">Jun 7, 2014  &middot; <a href="http://abhi1010.github.io/2014/06/removing-duplicates-from-linked-list/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/c">c&#43;&#43;</a><a class="a_tag" href="http://abhi1010.github.io/tags/algo">algo</a><a class="a_tag" href="http://abhi1010.github.io/tags/linked-list">linked list</a>
    
      </span>
      
      

<p>Duplicates can be removed in many ways:</p>

<ul>
<li><p>Create a new Linked List containing only unique items</p></li>

<li><p>Iterate through the Linked List and keep removing items that are being repeated</p></li>
</ul>

<p>The internal structure itself for the algo can either be map or set based. When using map the Node itself can be saved thereby making your life easier if you are creating a new Linked List. However sets can be very useful if we are just iterating through the Linked List and simply deleting items that are being repetetive. This is also a great spacesaver. Hence we decided to go down this path.</p>

<h1 id="code:33d170712a3b1643edfc33b9f231740c">Code</h1>

<p>As usual the <a href="https://github.com/abhi1010/Algorithms/blob/master/Algo_codes/Node.cpp">code</a> is available here:</p>

<p><a href="https://github.com/abhi1010/Algorithms">https://github.com/abhi1010/Algorithms</a></p>

<p>Here&rsquo;s a small sample as to how to do it:</p>

<script type="text/javascript" src="http://gist.github.com/e2b7117c20d0f591896f.js"></script>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/06/deleting-a-node-from-singly-linked-list/">Deleting a Node from Singly Linked List</a>
      </h1>
      <span class="post-date">Jun 7, 2014  &middot; <a href="http://abhi1010.github.io/2014/06/deleting-a-node-from-singly-linked-list/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/linked-list">linked list</a><a class="a_tag" href="http://abhi1010.github.io/tags/c">c&#43;&#43;</a><a class="a_tag" href="http://abhi1010.github.io/tags/algo">algo</a>
    
      </span>
      
      

<p>Deleting a Node from Singly Linked List is rather straight forward.</p>

<ul>
<li><p>You have to know the head first of all</p></li>

<li><p>Start by checking the head if that&rsquo;s the one you are looking for</p></li>

<li><p>Keep moving forward and checking - always check for null pointers everywhere</p></li>
</ul>

<p>Before we talk about the code, let&rsquo;s see how Linked List is setup.
&lt;!&ndash; more &ndash;&gt;</p>

<script type="text/javascript" src="http://gist.github.com/33be440bf1012773b7e1.js"></script>

<p>Now, below is the code for it&hellip;.</p>

<script type="text/javascript" src="http://gist.github.com/bf9dbb193b4ff84ba3af.js"></script>

<h3 id="code:ca5ee7b35fae15e9d7ea6b34351195c6">Code</h3>

<p>As usual the code is available <a href="https://github.com/abhi1010/Algorithms/blob/master/Algo_codes/Node.cpp">here</a>:</p>

<p><a href="https://github.com/abhi1010/Algorithms">https://github.com/abhi1010/Algorithms</a></p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/05/usage-of-typename/">Usage of typename</a>
      </h1>
      <span class="post-date">May 26, 2014  &middot; <a href="http://abhi1010.github.io/2014/05/usage-of-typename/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/c">c&#43;&#43;</a>
    
      </span>
      
      <p>What is wrong with the following code?</p>

<script type="text/javascript" src="http://gist.github.com/0bd5e4d910e4d8a7672e.js"></script>

<p>The issue is very simple but hard to notice. If you try to compile this, you will get the following errors:</p>

<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #000000; font-style: italic">    main.cpp:24:5: error: need &#39;typename&#39; before &#39;OuterStruct&lt;T2&gt;::InnerStruct&#39; because &#39;OuterStruct&lt;T2&gt;&#39; is a dependent scope</span>
<span style="color: #000000; font-style: italic">    OuterStruct&lt;T2&gt;::InnerStruct mUsingInner;</span>
<span style="color: #000000; font-style: italic">    ^</span>
<span style="color: #000000; font-style: italic">    main.cpp: In function &#39;int main(int, char**)&#39;:</span>
<span style="color: #000000; font-style: italic">    main.cpp:34:13: error: &#39;struct InnerStruct_Wrapper&lt;int&gt;&#39; has no member named &#39;mUsingInner&#39;</span>
<span style="color: #000000; font-style: italic">    wrapper.mUsingInner = innerStrct;</span>
</pre></div>


<p><strong>The Issue</strong></p>

<p>At least it straight away tells you something is wrong with <code>InnerStruct_Wrapper</code>. Here&rsquo;s what is happening:</p>

<ul>
<li><p>The compiler does not know that mUsingInner in that line is actually a variable of type &ldquo;OuterStruct<T2>::InnerStruct&rdquo;</p></li>

<li><p>InnerStruct will only be known later when it is being instantiated</p></li>

<li><p>Compiler cannot figure out what InnerStruct means here. It could be a type or a member variable</p></li>
</ul>

<p><strong>The Fix</strong></p>

<p>The only way here is to help the compiler by telling it beforehand that is going to be a class or struct type. The way to tell the compiler that something like this is supposed to be a type name is to throw in the keyword &ldquo;typename&rdquo;. The &ldquo;typename&rdquo; keyword has to be used everytime you want to tell the compiler that it should expect a Type in its place.</p>

<p>One place where this is used quite a lot is when templates have to implement iterators.</p>

<p><strong>Full Code</strong></p>

<p><strong><em>The full sample code, along with the fix</em></strong> is provided on <a href="http://coliru.stacked-crooked.com/a/b0ab70c458370048">Stacked-Crooked</a>.</p>

      
    </div>
    
    <div class="post">
      <h1 class="post-title">
        <a href="http://abhi1010.github.io/2014/05/setting-up-your-vim...-your-style/">Setting up your VIM... Your style</a>
      </h1>
      <span class="post-date">May 19, 2014  &middot; <a href="http://abhi1010.github.io/2014/05/setting-up-your-vim...-your-style/#disqus_thread">Comments</a>
      
      <br/>
      <a class="a_cat" href="http://abhi1010.github.io/categories/code">code</a>
        
      <a class="a_tag" href="http://abhi1010.github.io/tags/bash">bash</a><a class="a_tag" href="http://abhi1010.github.io/tags/vim">vim</a><a class="a_tag" href="http://abhi1010.github.io/tags/tips">tips</a>
    
      </span>
      
      <p>Writing code using VIM can be a bit overwhelming but it helps creating a few shortcuts there to make your life easier. Here I will discuss a few.</p>

<ul>
<li>First of all, it is always a good idea to set up your tabs and spaces</li>
<li>Set up shortcuts for:

<ul>
<li><code>Toggling of Auto-Indent</code> while pasting source text; very useful in code (<em>F2</em> in my provided script)</li>
<li><code>Toggling of Auto-Scroll</code> of Split windows (<em>F3</em> in my provided script)</li>
<li><code>Macro for Folding functions</code> within the source code (<em><em>@q</em></em> in my provided script)</li>
<li><code>Smart case search</code> - based on whether the input is in caps or not</li>
<li><code>Toggling of Mouse Usage</code> in VIM window - to allow quick selection of text (<em>F12</em> in my provided script)</li>
</ul></li>
</ul>

<p>Please see the provided script below to have a look.</p>

<script type="text/javascript" src="http://gist.github.com/6f190c9f3afd42881ef5.js"></script>

      
    </div>
    
    
    
    <ul class="pagination">
        
        <li>
            <a href="/" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
        </li>
        
        <li
        class="disabled">
        <a href="" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
        </li>
        
        <li
        class="active"><a href="/">1</a></li>
        
        <li
        ><a href="/page/2/">2</a></li>
        
        <li
        ><a href="/page/3/">3</a></li>
        
        <li
        ><a href="/page/4/">4</a></li>
        
        <li
        ><a href="/page/5/">5</a></li>
        
        <li
        >
        <a href="/page/2/" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
        </li>
        
        <li>
            <a href="/page/5/" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
        </li>
        
    </ul>
    
  </div>
</div>


<script type="text/javascript">
var disqus_shortname = "abhi1010";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



</body>
</html>

